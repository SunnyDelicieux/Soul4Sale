<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Soul4Sale - Bibliothèque Féérique</title>
<style>
  /* ... style intact ... */
</style>
</head>
<body>
<header>
  <h1>SOUL4SALE DATABASE</h1>
  <nav>
    <button id="menu-files" class="active">Files</button>
    <button id="menu-about">About</button>
    <button id="menu-download">Download</button>
  </nav>
</header>
<main>
  <aside id="sidebar">
    <h2>Documents</h2>
    <div id="file-list">
      <button data-file="file_pacte_feerique" class="active">Pacte féerique</button>
      <button data-file="file_manuel_sacrifice">Manuel du sacrifice</button>
      <button data-file="file_theorie_effondrement">Théorie de l'effondrement</button>
      <button data-file="file_rituel">Rituel</button>
      <button data-file="file_maison_benie">Maison bénie</button>
      <div id="download-section" style="display:none; margin-top:1rem;">
        <h2>Downloads</h2>
        <button data-file="rapport_de_maintenance">rapport_de_maintenance</button>
        <button data-file="rire_escalier">rire_escalier</button>
        <button data-file="nom_d_un_enfant">nom_d_un_enfant</button>
        <button data-file="memory_fragment_0093">memory_fragment_0093</button>
        <button data-file="odeur_des_roses">odeur_des_roses</button>
      </div>
    </div>
  </aside>
  <section id="content">
    <pre id="file-content"></pre>
    <div id="terminal" tabindex="0">
      <div id="output"></div>
      <div id="input-line">
        <span>&gt;</span>
        <input type="text" id="command-input" autocomplete="off" />
      </div>
    </div>
    <div id="community-board">
      <div><strong>COMMUNITY BOARD</strong></div>
      <div>Bienvenue dans la bibliothèque féerique. Veuillez respecter le rituel.</div>
    </div>
  </section>
</main>
<script>
(() => {
  const files = {
    file_pacte_feerique: [
      '--- PACTE FÉERIQUE ---',
      '« Le clan, lié à la forêt, doit honorer l\'ancien serment.',
      'Le sang verse les racines, le souffle nourrit les cimes.',
      'Ainsi la vie et la mort dansent sous l\'œil des Zoryas. »',
      '--- Fin du document ---'
    ],
    file_manuel_sacrifice: [
      '--- MANUEL DU SACRIFICE ---',
      '« Offrir sa propre essence pour protéger ce qui reste.',
      'Le sang est la clé, le rite est la porte.',
      'Sacrifice accepté, équilibre maintenu, oubli instauré. »',
      '--- Fin du document ---'
    ],
    file_theorie_effondrement: [
      '--- THÉORIE DE L\'EFFONDREMENT ---',
      '« Toute chose a une fin, toute chose mérite de s\'écrouler.',
      'Tant qu\'une chose porte un nom, elle reste vivante.',
      'L\'oubli est la mort nécessaire pour que la vie puisse continuer.',
      'Prononcer le nom, c\'est invoquer la chose encore.',
      'L\'effondrement est la clé pour libérer l\'espace et le temps. »',
      '--- Fin du document ---'
    ],
    file_rituel: [
      '--- RITUEL DE L\'OUBLI ---',
      'Commande : rituel_oubli',
      'Entrez un souvenir dans la chatbox qui s\'affiche.',
      'Un chargement simulé aura lieu.',
      'Un message confirmera la validation prochaine de votre offrande.',
      '--- Fin du document ---'
    ],
    file_maison_benie: [
      '--- MAISON BÉNIE ---',
      '« Lieu sacré, protecteur des âmes errantes.',
      'Seuls les élus peuvent en franchir le seuil.',
      'Mystères et secrets s\'y mêlent aux ombres. »',
      '--- Fin du document ---'
    ],
    rapport_de_maintenance: ['[Rapport technique confidentiel]...'],
    rire_escalier: ['Un rire mécanique s\'élève à chaque marche.'],
    nom_d_un_enfant: ['Le nom est oublié, mais le souvenir persiste.'],
    memory_fragment_0093: ['Un fragment d\'esprit gelé dans le temps.'],
    odeur_des_roses: ['Une senteur persistante, sucrée et nostalgique.']
  };

  const output = document.getElementById('output');
  const input = document.getElementById('command-input');
  const fileList = document.getElementById('file-list');
  const fileContent = document.getElementById('file-content');
  const communityBoard = document.getElementById('community-board');
  const downloadTab = document.getElementById('menu-download');
  const downloadSection = document.getElementById('download-section');

  let adminMode = false;
  let passwordPrompt = false;

  function printLines(lines, className = 'system') {
    lines.forEach(line => {
      const div = document.createElement('div');
      div.textContent = '> ' + line;
      div.className = className;
      output.appendChild(div);
    });
    output.scrollTop = output.scrollHeight;
  }

  function printError(msg) {
    printLines([msg], 'error');
  }

  function printUserCommand(cmd) {
    const div = document.createElement('div');
    div.textContent = '> ' + cmd;
    div.className = 'command';
    output.appendChild(div);
    output.scrollTop = output.scrollHeight;
  }

  function loadFile(name) {
    if (!files[name]) return;
    fileContent.textContent = files[name].join('\n');
    [...fileList.querySelectorAll('button')].forEach(btn => {
      btn.classList.toggle('active', btn.dataset.file === name);
    });
  }

  loadFile('file_pacte_feerique');

  fileList.addEventListener('click', e => {
    if (e.target.tagName === 'BUTTON') {
      loadFile(e.target.dataset.file);
    }
  });

  document.getElementById('menu-files').addEventListener('click', () => {
    downloadSection.style.display = 'none';
  });

  downloadTab.addEventListener('click', () => {
    downloadSection.style.display = 'block';
  });

  const adminPassword = '321436';

  input.addEventListener('keydown', e => {
    if (e.key === 'Enter') {
      const cmd = input.value.trim();
      if (!cmd) return;
      printUserCommand(cmd);
      input.value = '';

      if (passwordPrompt) {
        if (cmd === adminPassword) {
          adminMode = true;
          printLines(['Accès administrateur activé.'], 'admin');
          files.file_maison_benie.push('--- ADMIN ---', 'Créée par Baba Yaga pour protéger les siens.');
        } else {
          printError('Mot de passe incorrect.');
        }
        passwordPrompt = false;
        return;
      }

      if (cmd === 'open administrator panel') {
        printLines(['Entrer mot de passe :']);
        passwordPrompt = true;
        return;
      }

      if (cmd === 'help') {
        printLines([ 'Commandes disponibles :',
          '- load file_pacte_feerique',
          '- load file_manuel_sacrifice',
          '- load file_theorie_effondrement',
          '- load file_rituel',
          '- load file_maison_benie',
          '- open administrator panel']);
        return;
      }

      if (files[cmd.split(' ')[1]]) {
        loadFile(cmd.split(' ')[1]);
        return;
      }

      if (cmd === 'rituel_oubli') {
        printLines(['Veuillez entrer un souvenir à sacrifier dans le champ ci-dessous.']);
        setTimeout(() => printLines(['Analyse en cours...']), 1000);
        setTimeout(() => printLines(['Souvenir accepté. Changement validé dans quelques heures.']), 3000);
        return;
      }

      printError('Commande non reconnue.');
    }
  });
})();
</script>
</body>
</html>
